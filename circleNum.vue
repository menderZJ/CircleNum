<template>    <div class="CircleNumSelInput" :id="id" :style="(w?'width: '+w+'px;':'')+(h?'height:'+ h+'px;':'') + ';display:block;position:relative;'" v-on:click="showSel()"><span v-if="value!=''" :class="'cnum-'+value+' cnum-view'" :placeholder="placeholder"></span>    <span v-else :class="'cnum-'+value+' cnum-view'" :placeholder="placeholder">{{ placeholder }}</span>    <input type="hidden" :value="value" :id="'input-'+id"  readonly />    </div></template><script>    export default {        name: 'CircleNumSel',        props: {            w: String,            h: String,            usedNum: {                Array,                default:[],                },            bigNumCount:Number,            bigNumSize:String,            smallNumSize:String,            value:{default:''},            placeholder:{default:''},            maxNum:{default:100},        },        data() {            return {                // pUsedNum: this.usedNum && this.usedNum.rs  ? this.usedNum.rs : [],                tipsIsShow: false,                id:'CircleNumSelInput'+(new Date).getTime()+Math.floor((Math.random()*1000000)),                pbigNumCount:this.bigNumCount?parseInt(this.bigNumCount):20,                pMaxNum:this.maxNum,            };        },        methods: {            selected (v,oldV) {                  var vm = this;                  vm.$emit('selected',v,oldV);                  vm.$emit('input',v);                },            showSel() {                vm=this;                if(vm.tipsIsShow){return ;}                var vm=this;                var o = this.$el;
                var ORect=o.getBoundingClientRect();                var mTop = (parseFloat(ORect.top) + parseFloat(ORect.height) + 4) + 'px';                var mLeft = (parseFloat(ORect.left) + 4) + 'px';
                var divConStr = "";                var divCon = document.createElement("div");                divCon.setAttribute("class","CircleNumTipDiv");                divCon.style.position = "absolute";                divCon.style.width =  parseFloat(ORect.width)+'px';                divCon.style.height = "auto";                divCon.style.minWidth = "300px";
                divCon.style.maxWidth = "450px";                //divCon.style.backgroundColor='rgba(255,240,240,1)';                divCon.style.zIndex = "99";                divCon.style.top = mTop;                divCon.style.left = mLeft;                divCon.style.textAlign = 'justify';                //divCon.style.border = '1px rgba(0,0,0,0.1) solid';                divCon.id = "CircleNumTipDiv-" + this.id;                divCon.onmouseleave = function() {                                                var oo= document.querySelectorAll("[id^='CircleNumTipDiv-']")                        oo.forEach(function(n){                        n.parentNode.removeChild(n);})                                                vm.tipsIsShow=false;                }                for (var i = 1; i <= Math.min(this.pMaxNum,this.pbigNumCount); i++) {                    divConStr += "<i id='CircleNum"+ this.id +"' class='cnum-" + i +" cnum-big  cnum-num "+(this.usedNum.indexOf(i)>-1? "cnum-used":"")+ "'  style='margin:4px;font-size:"+this.bigNumSize+";cursor:"+(this.usedNum.indexOf(i)>-1?"default":"pointer") +"' v='" + i +"'></i>";                }                for (i = this.pbigNumCount+1; i <= this.pMaxNum; i++) {                   divConStr += "<i  id='CircleNum"+ this.id +"' class='cnum-" + i +"  cnum-small  cnum-num "+(this.usedNum.indexOf(i)>-1? "cnum-used":"")+ "'  style='margin:4px;font-size:"+this.smallNumSize+";cursor:"+(this.usedNum.indexOf(i)>-1?"default":"pointer") +  "' v='" + i +"'  ></i>";                }                divCon.innerHTML = divConStr;                divCon.querySelectorAll("i:not(.cnum-used)").forEach(function(vo){                    vo.onclick=function(e){                    var oo=(e?e:Event).target;                    var v=parseInt(oo.getAttribute("v"));                    var oldV=parseInt(document.getElementById('input-'+oo.id.toString().substr(9)).value);                    document.getElementById(oo.id.toString().substr(9)).querySelector("span").setAttribute("class","cnum-"+v);                    document.getElementById('input-'+oo.id.toString().substr(9)).value=v;                                        var oAll= document.querySelectorAll("[id^='CircleNumTipDiv-']")                    oAll.forEach(function(n){                    n.parentNode.removeChild(n);})                                            vm.tipsIsShow=false;                    vm.selected( v, oldV);                    }                                    });                document.getElementsByTagName("body")[0].append(divCon);                vm.tipsIsShow = true;            },        },    }</script><style scoped>    .CircleNumSelInput {                /* min-height: 16px;        min-width: 16px; */        width: 100%;        height: 100%;        cursor: pointer;        margin-left: auto;        margin-right: auto;    }    .cnum-view{        cursor: pointer;    }    </style>